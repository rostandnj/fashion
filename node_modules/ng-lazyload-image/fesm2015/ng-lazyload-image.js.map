{"version":3,"file":"ng-lazyload-image.js","sources":["ng://ng-lazyload-image/src/util/css.util.ts","ng://ng-lazyload-image/src/util/util.ts","ng://ng-lazyload-image/src/shared-preset/preset.ts","ng://ng-lazyload-image/src/intersection-observer-preset/intersection-listener.ts","ng://ng-lazyload-image/src/intersection-observer-preset/preset.ts","ng://ng-lazyload-image/src/ssr-preset/preset.ts","ng://ng-lazyload-image/src/hooks-factory.ts","ng://ng-lazyload-image/src/lazyload-image.ts","ng://ng-lazyload-image/src/lazyload-image.directive.ts","ng://ng-lazyload-image/src/lazyload-image.module.ts","ng://ng-lazyload-image/src/scroll-preset/rect.ts","ng://ng-lazyload-image/src/scroll-preset/scroll-listener.ts","ng://ng-lazyload-image/src/scroll-preset/preset.ts","ng://ng-lazyload-image/index.ts","ng://ng-lazyload-image/ng-lazyload-image.ts"],"sourcesContent":["export const cssClassNames = {\n  loaded: 'ng-lazyloaded',\n  loading: 'ng-lazyloading',\n  failed: 'ng-failed-lazyloaded'\n};\n\nexport function removeCssClassName(element: HTMLImageElement | HTMLDivElement, cssClassName: string) {\n  element.className = element.className.replace(cssClassName, '');\n}\n\nexport function addCssClassName(element: HTMLImageElement | HTMLDivElement, cssClassName: string) {\n  if (!element.className.includes(cssClassName)) {\n    element.className += ` ${cssClassName}`;\n  }\n}\n\nexport function hasCssClassName(element: HTMLImageElement | HTMLDivElement, cssClassName: string) {\n  return element.className && element.className.includes(cssClassName);\n}\n","export function getNavigator(): Navigator | undefined {\n  return typeof window !== 'undefined' ? window.navigator : undefined;\n}\n\nexport function isChildOfPicture(element: HTMLImageElement | HTMLDivElement): boolean {\n  return Boolean(element.parentElement && element.parentElement.nodeName.toLowerCase() === 'picture');\n}\n\nexport function isImageElement(element: HTMLImageElement | HTMLDivElement): element is HTMLImageElement {\n  return element.nodeName.toLowerCase() === 'img';\n}\n\nexport function setImage(element: HTMLImageElement | HTMLDivElement, imagePath: string, useSrcset?: boolean) {\n  if (isImageElement(element)) {\n    if (useSrcset && 'srcset' in element) {\n      element.srcset = imagePath;\n    } else {\n      element.src = imagePath;\n    }\n  } else {\n    element.style.backgroundImage = `url('${imagePath}')`;\n  }\n  return element;\n}\n\nfunction setSources(attrName: string) {\n  return (image: HTMLImageElement) => {\n    const sources = image.parentElement!.getElementsByTagName('source');\n    for (let i = 0; i < sources.length; i++) {\n      const attrValue = sources[i].getAttribute(attrName);\n      if (attrValue) {\n        // Check if `srcset` is supported by the current browser\n        if ('srcset' in sources[i]) {\n          sources[i].srcset = attrValue;\n        } else {\n          sources[i].src = attrValue;\n        }\n      }\n    }\n  };\n}\n\nconst setSourcesToDefault = setSources('defaultImage');\nexport const setSourcesToLazy = setSources('lazyLoad');\nconst setSourcesToError = setSources('errorImage');\n\nfunction setImageAndSources(setSourcesFn: (image: HTMLImageElement) => void) {\n  return (element: HTMLImageElement | HTMLDivElement, imagePath?: string, useSrcset?: boolean) => {\n    if (isImageElement(element) && isChildOfPicture(element)) {\n      setSourcesFn(element);\n    }\n    if (imagePath) {\n      setImage(element, imagePath, useSrcset);\n    }\n  };\n}\n\nexport const setImageAndSourcesToDefault = setImageAndSources(setSourcesToDefault);\nexport const setImageAndSourcesToLazy = setImageAndSources(setSourcesToLazy);\nexport const setImageAndSourcesToError = setImageAndSources(setSourcesToError);\n","import { FinallyFn, IsBotFn, LoadImageFn, SetErrorImageFn, SetLoadedImageFn, SetupFn } from '../types';\nimport {\n  addCssClassName,\n  cssClassNames,\n  hasCssClassName,\n  isChildOfPicture,\n  isImageElement,\n  removeCssClassName,\n  setImage,\n  setImageAndSourcesToDefault,\n  setImageAndSourcesToError,\n  setImageAndSourcesToLazy,\n  setSourcesToLazy\n} from '../util';\n\nconst end: FinallyFn = ({ element }) => {\n  addCssClassName(element, cssClassNames.loaded);\n  removeCssClassName(element, cssClassNames.loading);\n};\n\nexport const loadImage: LoadImageFn = ({ element, useSrcset, imagePath, decode }) => {\n  let img: HTMLImageElement;\n  if (isImageElement(element) && isChildOfPicture(element)) {\n    const parentClone = element.parentNode!.cloneNode(true) as HTMLPictureElement;\n    img = parentClone.getElementsByTagName('img')[0];\n    setSourcesToLazy(img);\n    setImage(img, imagePath, useSrcset);\n  } else {\n    img = new Image();\n    if (isImageElement(element) && element.sizes) {\n      img.sizes = element.sizes;\n    }\n    if (useSrcset && 'srcset' in img) {\n      img.srcset = imagePath;\n    } else {\n      img.src = imagePath;\n    }\n  }\n\n  if (decode && img.decode) {\n    return img.decode().then(() => imagePath);\n  }\n\n  return new Promise((resolve, reject) => {\n    img.onload = () => resolve(imagePath);\n    img.onerror = () => reject(null);\n  });\n};\n\nconst setErrorImage: SetErrorImageFn = ({ element, errorImagePath, useSrcset }) => {\n  setImageAndSourcesToError(element, errorImagePath, useSrcset);\n  addCssClassName(element, cssClassNames.failed);\n};\n\nconst setLoadedImage: SetLoadedImageFn = ({ element, imagePath, useSrcset }) => {\n  setImageAndSourcesToLazy(element, imagePath, useSrcset);\n};\n\nconst setup: SetupFn = ({ element, defaultImagePath, useSrcset }) => {\n  setImageAndSourcesToDefault(element, defaultImagePath, useSrcset);\n  addCssClassName(element, cssClassNames.loading);\n\n  if (hasCssClassName(element, cssClassNames.loaded)) {\n    removeCssClassName(element, cssClassNames.loaded);\n  }\n};\n\nexport const isBot: IsBotFn = navigator => {\n  if (navigator && navigator.userAgent) {\n    return /googlebot|bingbot|yandex|baiduspider|facebookexternalhit|twitterbot|rogerbot|linkedinbot|embedly|quora\\ link\\ preview|showyoubot|outbrain|pinterest\\/0\\.|pinterestbot|slackbot|vkShare|W3C_Validator|whatsapp|duckduckbot/i.test(\n      navigator.userAgent\n    );\n  }\n  return false;\n};\n\nexport const sharedPreset = {\n  finally: end,\n  loadImage,\n  setErrorImage,\n  setLoadedImage,\n  setup,\n  isBot\n};\n","import { Observable, Subject } from 'rxjs';\nimport { filter } from 'rxjs/operators';\nimport { Attributes } from '../types';\n\ntype ObserverOptions = {\n  root: Element | null;\n  rootMargin?: string;\n};\n\nconst observers = new WeakMap<Element | {}, IntersectionObserver>();\n\nconst intersectionSubject = new Subject<IntersectionObserverEntry>();\n\nfunction loadingCallback(entrys: IntersectionObserverEntry[]) {\n  entrys.forEach(entry => intersectionSubject.next(entry));\n}\n\nconst uniqKey = {};\n\nexport const getIntersectionObserver = (attributes: Attributes): Observable<IntersectionObserverEntry> => {\n  const scrollContainerKey = attributes.scrollContainer || uniqKey;\n  const options: ObserverOptions = {\n    root: attributes.scrollContainer || null\n  };\n  if (attributes.offset) {\n    options.rootMargin = `${attributes.offset}px`;\n  }\n\n  let observer = observers.get(scrollContainerKey);\n\n  if (!observer) {\n    observer = new IntersectionObserver(loadingCallback, options);\n    observers.set(scrollContainerKey, observer);\n  }\n\n  observer.observe(attributes.element);\n\n  return Observable.create((obs: Subject<IntersectionObserverEntry>) => {\n    const subscription = intersectionSubject.pipe(filter(entry => entry.target === attributes.element)).subscribe(obs);\n    return () => {\n      subscription.unsubscribe();\n      observer!.unobserve(attributes.element);\n    };\n  });\n};\n","import { sharedPreset } from '../shared-preset/preset';\nimport { Attributes, GetObservableFn, HookSet, IsVisibleFn } from '../types';\nimport { getIntersectionObserver } from './intersection-listener';\n\nexport const isVisible: IsVisibleFn<IntersectionObserverEntry> = ({ event }) => {\n  return event.isIntersecting;\n};\n\nexport const getObservable: GetObservableFn<IntersectionObserverEntry> = (attributes: Attributes, _getInterObserver = getIntersectionObserver) => {\n  if (attributes.customObservable) {\n    return attributes.customObservable;\n  }\n  return _getInterObserver(attributes);\n};\n\nexport const intersectionObserverPreset: HookSet<IntersectionObserverEntry> = Object.assign({}, sharedPreset, {\n  isVisible,\n  getObservable\n});\n","import { of } from 'rxjs';\nimport { GetObservableFn, HookSet, IsVisibleFn, LoadImageFn } from '../types';\nimport { sharedPreset } from '../shared-preset/preset';\n\nconst isVisible: IsVisibleFn<string> = () => {\n  return true;\n};\n\nconst getObservable: GetObservableFn<string> = () => {\n  return of('load');\n};\n\nconst loadImage: LoadImageFn = ({ imagePath }) => {\n  return [imagePath];\n};\n\nexport const ssrPreset: HookSet<string> = Object.assign({}, sharedPreset, {\n  isVisible,\n  getObservable,\n  loadImage\n});\n","import { intersectionObserverPreset } from './intersection-observer-preset';\nimport { ssrPreset } from './ssr-preset';\nimport { HookSet, ModuleOptions } from './types';\nimport { getNavigator } from './util';\n\nexport function createHooks<E>(platformId: Object, options?: ModuleOptions<E>): HookSet<any> {\n  const defaultPreset = intersectionObserverPreset;\n  const isBot = options && options.isBot ? options.isBot : defaultPreset.isBot;\n\n  if (isBot(getNavigator(), platformId)) {\n    return Object.assign(ssrPreset, { isBot });\n  } else if (!options) {\n    return defaultPreset;\n  }\n\n  const hooks = {};\n  if (options.preset) {\n    Object.assign(hooks, options.preset);\n  } else {\n    Object.assign(hooks, defaultPreset);\n  }\n  Object.keys(options)\n    .filter(key => key !== 'preset')\n    .forEach(key => {\n      hooks[key] = options[key];\n    });\n  return hooks as HookSet<any>;\n}\n","import { Observable, of } from 'rxjs';\nimport { catchError, filter, map, mergeMap, take, tap } from 'rxjs/operators';\nimport { Attributes, HookSet } from './types';\n\nexport function lazyLoadImage<E>(hookSet: HookSet<E>, attributes: Attributes) {\n  return (evntObservable: Observable<E>): Observable<boolean> => {\n    return evntObservable.pipe(\n      tap(data => attributes.onStateChange.emit({ reason: 'observer-emit', data })),\n      filter(event =>\n        hookSet.isVisible({\n          element: attributes.element,\n          event: event,\n          offset: attributes.offset,\n          scrollContainer: attributes.scrollContainer\n        })\n      ),\n      take(1),\n      tap(() => attributes.onStateChange.emit({ reason: 'start-loading' })),\n      mergeMap(() => hookSet.loadImage(attributes)),\n      tap(() => attributes.onStateChange.emit({ reason: 'mount-image' })),\n      tap(imagePath =>\n        hookSet.setLoadedImage({\n          element: attributes.element,\n          imagePath,\n          useSrcset: attributes.useSrcset\n        })\n      ),\n      tap(() => attributes.onStateChange.emit({ reason: 'loading-succeeded' })),\n      map(() => true),\n      catchError(error => {\n        attributes.onStateChange.emit({ reason: 'loading-failed', data: error });\n        hookSet.setErrorImage(attributes);\n        return of(false);\n      }),\n      tap(() => {\n        attributes.onStateChange.emit({ reason: 'finally' });\n        hookSet.finally(attributes);\n      })\n    ) as Observable<boolean>;\n  };\n}\n","import { isPlatformServer } from '@angular/common';\nimport { AfterContentInit, Directive, ElementRef, EventEmitter, Inject, Input, NgZone, OnChanges, OnDestroy, Optional, Output, PLATFORM_ID } from '@angular/core';\nimport { Observable, ReplaySubject, Subscription, never } from 'rxjs';\nimport { switchMap, tap } from 'rxjs/operators';\nimport { createHooks } from './hooks-factory';\nimport { lazyLoadImage } from './lazyload-image';\nimport { Attributes, HookSet, ModuleOptions, StateChange } from './types';\nimport { getNavigator } from './util';\n\n@Directive({\n  selector: '[lazyLoad]'\n})\nexport class LazyLoadImageDirective implements OnChanges, AfterContentInit, OnDestroy {\n  @Input('lazyLoad') lazyImage!: string; // The image to be lazy loaded\n  @Input() defaultImage?: string; // The image to be displayed before lazyImage is loaded\n  @Input() errorImage?: string; // The image to be displayed if lazyImage load fails\n  @Input() scrollTarget?: any; // Scroll container that contains the image and emits scoll events\n  @Input() customObservable?: Observable<any>; // Pass your own event emitter\n  @Input() offset?: number; // The number of px a image should be loaded before it is in view port\n  @Input() useSrcset?: boolean; // Whether srcset attribute should be used instead of src\n  @Input() decode?: boolean; // Decode the image before appending to the DOM\n  @Input() debug?: boolean; // Will print some debug info when `true`\n  @Output() onStateChange: EventEmitter<StateChange> = new EventEmitter(); // Emits an event on every state change\n  @Output() onLoad: EventEmitter<boolean> = new EventEmitter(); // @deprecated use `onStateChange` instead.\n  private propertyChanges$: ReplaySubject<Attributes>;\n  private elementRef: ElementRef;\n  private ngZone: NgZone;\n  private loadSubscription?: Subscription;\n  private debugSubscription?: Subscription;\n  private hooks: HookSet<any>;\n  private platformId: Object;\n\n  constructor(el: ElementRef, ngZone: NgZone, @Inject(PLATFORM_ID) platformId: Object, @Optional() @Inject('options') options?: ModuleOptions) {\n    this.elementRef = el;\n    this.ngZone = ngZone;\n    this.propertyChanges$ = new ReplaySubject();\n    this.platformId = platformId;\n    this.hooks = createHooks(platformId, options);\n  }\n\n  ngOnChanges() {\n    if (this.debug === true && !this.debugSubscription) {\n      this.debugSubscription = this.onStateChange.subscribe((e: StateChange) => console.log(e));\n    }\n\n    this.propertyChanges$.next({\n      element: this.elementRef.nativeElement,\n      imagePath: this.lazyImage,\n      defaultImagePath: this.defaultImage,\n      errorImagePath: this.errorImage,\n      useSrcset: this.useSrcset,\n      offset: this.offset ? this.offset | 0 : 0,\n      scrollContainer: this.scrollTarget,\n      customObservable: this.customObservable,\n      decode: this.decode,\n      onStateChange: this.onStateChange\n    });\n  }\n\n  ngAfterContentInit() {\n    // Don't do anything if SSR and the user isn't a bot\n    if (isPlatformServer(this.platformId) && !this.hooks.isBot(getNavigator(), this.platformId)) {\n      return null;\n    }\n\n    this.ngZone.runOutsideAngular(() => {\n      this.loadSubscription = this.propertyChanges$\n        .pipe(\n          tap(attributes => attributes.onStateChange.emit({ reason: 'setup' })),\n          tap(attributes => this.hooks.setup(attributes)),\n          switchMap(attributes => {\n            if (!attributes.imagePath) {\n              return never();\n            }\n            return this.hooks.getObservable(attributes).pipe(lazyLoadImage(this.hooks, attributes));\n          })\n        )\n        .subscribe(success => this.onLoad.emit(success));\n    });\n  }\n\n  ngOnDestroy() {\n    this.loadSubscription?.unsubscribe();\n    this.debugSubscription?.unsubscribe();\n  }\n}\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { LazyLoadImageDirective } from './lazyload-image.directive';\nimport { ModuleOptions } from './types';\n\n@NgModule({\n  declarations: [LazyLoadImageDirective],\n  exports: [LazyLoadImageDirective]\n})\nexport class LazyLoadImageModule {\n  static forRoot(options: ModuleOptions): ModuleWithProviders {\n    return {\n      ngModule: LazyLoadImageModule,\n      providers: [{ provide: 'options', useValue: options }]\n    };\n  }\n}\n","export class Rect {\n  static empty: Rect = new Rect(0, 0, 0, 0);\n\n  left: number;\n  top: number;\n  right: number;\n  bottom: number;\n\n  constructor(left: number, top: number, right: number, bottom: number) {\n    this.left = left;\n    this.top = top;\n    this.right = right;\n    this.bottom = bottom;\n  }\n\n  static fromElement(element: HTMLElement): Rect {\n    const { left, top, right, bottom } = element.getBoundingClientRect();\n\n    if (left === 0 && top === 0 && right === 0 && bottom === 0) {\n      return Rect.empty;\n    } else {\n      return new Rect(left, top, right, bottom);\n    }\n  }\n\n  static fromWindow(_window: Window): Rect {\n    return new Rect(0, 0, _window.innerWidth, _window.innerHeight);\n  }\n\n  inflate(inflateBy: number) {\n    this.left -= inflateBy;\n    this.top -= inflateBy;\n    this.right += inflateBy;\n    this.bottom += inflateBy;\n  }\n\n  intersectsWith(rect: Rect): boolean {\n    return rect.left < this.right && this.left < rect.right && rect.top < this.bottom && this.top < rect.bottom;\n  }\n\n  getIntersectionWith(rect: Rect): Rect {\n    const left = Math.max(this.left, rect.left);\n    const top = Math.max(this.top, rect.top);\n    const right = Math.min(this.right, rect.right);\n    const bottom = Math.min(this.bottom, rect.bottom);\n\n    if (right >= left && bottom >= top) {\n      return new Rect(left, top, right, bottom);\n    } else {\n      return Rect.empty;\n    }\n  }\n}\n","import { empty, Observable, Subject } from 'rxjs';\nimport { sampleTime, share, startWith } from 'rxjs/operators';\n\nconst scrollListeners = new WeakMap<any, Observable<any>>();\n\nexport function sampleObservable<T>(obs: Observable<T>, scheduler?: any): Observable<T | ''> {\n  return obs.pipe(sampleTime(100, scheduler), share(), startWith(''));\n}\n\n// Only create one scroll listener per target and share the observable.\n// Typical, there will only be one observable per application\nexport const getScrollListener = (scrollTarget?: HTMLElement | Window): Observable<Event | ''> => {\n  if (!scrollTarget || typeof scrollTarget.addEventListener !== 'function') {\n    console.warn('`addEventListener` on ' + scrollTarget + ' (scrollTarget) is not a function. Skipping this target');\n    return empty();\n  }\n  const scrollListener = scrollListeners.get(scrollTarget);\n  if (scrollListener) {\n    return scrollListener;\n  }\n\n  const srollEvent: Observable<Event> = Observable.create((observer: Subject<Event>) => {\n    const eventName = 'scroll';\n    const handler = (event: Event) => observer.next(event);\n    const options = { passive: true, capture: false };\n    scrollTarget.addEventListener(eventName, handler, options);\n    return () => scrollTarget.removeEventListener(eventName, handler, options);\n  });\n\n  const listener = sampleObservable(srollEvent);\n  scrollListeners.set(scrollTarget, listener);\n  return listener;\n};\n","import { startWith } from 'rxjs/operators';\nimport { sharedPreset } from '../shared-preset/preset';\nimport { Attributes, GetObservableFn, HookSet, IsVisibleFn } from '../types';\nimport { Rect } from './rect';\nimport { getScrollListener } from './scroll-listener';\n\nexport const isVisible: IsVisibleFn<Event | string> = ({ element, offset, scrollContainer }, getWindow = () => window) => {\n  const elementBounds = Rect.fromElement(element);\n  if (elementBounds === Rect.empty) {\n    return false;\n  }\n  const windowBounds = Rect.fromWindow(getWindow());\n  elementBounds.inflate(offset);\n\n  if (scrollContainer) {\n    const scrollContainerBounds = Rect.fromElement(scrollContainer);\n    const intersection = scrollContainerBounds.getIntersectionWith(windowBounds);\n    return elementBounds.intersectsWith(intersection);\n  } else {\n    return elementBounds.intersectsWith(windowBounds);\n  }\n};\n\nconst getObservable: GetObservableFn<Event | string> = (attributes: Attributes) => {\n  if (attributes.customObservable) {\n    return attributes.customObservable.pipe(startWith(''));\n  }\n  if (attributes.scrollContainer) {\n    return getScrollListener(attributes.scrollContainer);\n  }\n  return getScrollListener(window);\n};\n\nexport const scrollPreset: HookSet<Event | string> = Object.assign({}, sharedPreset, {\n  isVisible,\n  getObservable\n});\n","import { LazyLoadImageDirective } from './src/lazyload-image.directive';\nimport { LazyLoadImageModule } from './src/lazyload-image.module';\nimport { intersectionObserverPreset } from './src/intersection-observer-preset';\nimport { scrollPreset } from './src/scroll-preset';\nimport { ModuleOptions, HookSet, IsVisibleProps, SetLoadedImageProps, SetErrorImageProps, LoadImageProps, Attributes, IsVisibleFn, LoadImageFn, SetLoadedImageFn, SetErrorImageFn, SetupFn, FinallyFn, GetObservableFn, StateChange } from './src/types';\n\nexport { LazyLoadImageDirective, LazyLoadImageModule, intersectionObserverPreset, scrollPreset, ModuleOptions, HookSet, IsVisibleProps, SetLoadedImageProps, SetErrorImageProps, LoadImageProps, Attributes, IsVisibleFn, LoadImageFn, SetLoadedImageFn, SetErrorImageFn, SetupFn, FinallyFn, GetObservableFn, StateChange };\nexport default LazyLoadImageModule;\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["isVisible","getObservable","loadImage"],"mappings":"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"}