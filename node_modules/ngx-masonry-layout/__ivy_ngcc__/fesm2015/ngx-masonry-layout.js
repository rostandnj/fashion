import { Component, ElementRef, HostListener, Input, Output, EventEmitter, NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';

function MasonryLayoutComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    const _r5 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "div", 1);
    ɵngcc0.ɵɵelementStart(1, "img", 2, 3);
    ɵngcc0.ɵɵlistener("click", function MasonryLayoutComponent_div_0_Template_img_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r5); const image_r1 = ctx.$implicit; const i_r2 = ctx.index; const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.clickOnImage(image_r1, i_r2); })("load", function MasonryLayoutComponent_div_0_Template_img_load_1_listener() { ɵngcc0.ɵɵrestoreView(_r5); const _r3 = ɵngcc0.ɵɵreference(2); const ctx_r6 = ɵngcc0.ɵɵnextContext(); return ctx_r6.onImageLoaded(_r3); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const image_r1 = ctx.$implicit;
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵstyleProp("width", image_r1.computedWidth)("height", image_r1.computedHeight)("float", "left")("margin", image_r1.margin)("background", "#eeeeee")("line-height", 0);
    ɵngcc0.ɵɵproperty("ngClass", ctx_r0.CLASS_NAME);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵstyleProp("width", 100, "%")("height", "auto")("opacity", 0);
    ɵngcc0.ɵɵproperty("src", image_r1.path, ɵngcc0.ɵɵsanitizeUrl);
} }
class MasonryLayoutComponent {
    /**
     * @param {?} elementRef
     */
    constructor(elementRef) {
        this.elementRef = elementRef;
        this.GUTTER = 0;
        this.savedNodeDimensions = [];
        this.gridState = 'not started';
        this.ENABLE_MASONRY = true;
        this.MAX_HEIGHT = 400;
        this.events = new EventEmitter();
        this.elem = this.elementRef.nativeElement;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set gutter(value) {
        this.GUTTER = value / 2;
    }
    /**
     * @return {?}
     */
    get isMobile() {
        /** @type {?} */
        var check = false;
        (function (a) { if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4)))
            check = true; })(navigator.userAgent || navigator.vendor);
        return check;
    }
    ;
    /**
     * @param {?} event
     * @return {?}
     */
    onWindowResize(event) {
        clearTimeout(this.resizeTimer);
        this.resizeTimer = setTimeout(() => {
            this.gridState = 'not started';
            this.buildGrid();
        }, 250);
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.buildGrid();
    }
    /**
     * @return {?}
     */
    ngOnChanges() {
        clearTimeout(this.changesTimer);
        this.changesTimer = setTimeout(() => {
            this.gridState = 'not started';
            this.buildGrid();
        }, 250);
    }
    /**
     * @return {?}
     */
    buildGrid() {
        /** @type {?} */
        let parentWidth = Math.floor(this.elem.parentNode.offsetWidth);
        /** @type {?} */
        let row = {
            startIndex: 0,
            endIndex: 0,
            length: 0,
            totalWidth: 0
        };
        if (!this.images || !this.images.length) {
            return;
        }
        this.elem.style.width = parentWidth + 'px';
        this.elem.style.display = 'table';
        this.images.forEach((node, index) => {
            if (row.totalWidth === 0) {
                row.startIndex = index;
                row.length = 0;
            }
            row.length++;
            row.totalWidth += this.getComputedWidth(index);
            if (row.totalWidth >= parentWidth || this.isLastChild(index)) {
                row.endIndex = index;
                /** @type {?} */
                let scaling = row.totalWidth / parentWidth;
                this.setColDimensions(scaling, row);
                row.totalWidth = 0;
            }
        });
    }
    /**
     * @param {?} scaling
     * @param {?} row
     * @return {?}
     */
    setColDimensions(scaling, row) {
        /** @type {?} */
        let totalRowWidth = 0;
        /** @type {?} */
        let parentWidth = this.elem.parentNode.offsetWidth;
        scaling = (scaling < 1) ? 1 : scaling;
        this.images.forEach((node, index) => {
            if (!this.ENABLE_MASONRY) {
                node.computedHeight = this.MAX_HEIGHT + 'px';
                node.computedWidth = this.getComputedWidth(index) + 'px';
                node.margin = this.getNodeMargin(parentWidth);
                return;
            }
            if (index >= row.startIndex && index <= row.endIndex) {
                /** @type {?} */
                let nodeWidth;
                // last image
                if (index === row.endIndex && scaling > 1) {
                    nodeWidth = (100 - totalRowWidth) - ((this.GUTTER * 2) / parentWidth * 100);
                    node.computedWidth = 'calc(' + nodeWidth + '%)';
                    if (this.gridState === 'not started') {
                        this.gridState = 'pre-building';
                        setTimeout(() => {
                            this.buildGrid();
                        }, 100);
                    }
                }
                else {
                    nodeWidth = ((this.getComputedWidth(index) / scaling) / parentWidth * 100) - ((row.length * (this.GUTTER * 2)) * (this.getComputedWidth(index) / scaling) / parentWidth) / parentWidth * 100;
                    node.computedWidth = 'calc(' + nodeWidth + '%)';
                    totalRowWidth += nodeWidth;
                    totalRowWidth += (this.GUTTER / parentWidth * 100) * 2;
                }
                // last row and last image
                if (index === row.endIndex && row.length === 1 && this.isMobile) {
                    nodeWidth = 100 - ((this.GUTTER * 2) / parentWidth * 100);
                    /** @type {?} */
                    let height = node.height * (parentWidth * (nodeWidth / 100) / node.width);
                    if (height / 2 < this.MAX_HEIGHT) {
                        node.computedWidth = 'calc(' + nodeWidth + '%)';
                    }
                }
                node.margin = this.getNodeMargin(parentWidth);
                node.computedHeight = node.height * (parentWidth * (nodeWidth / 100) / node.width) + 'px';
            }
        });
    }
    /**
     * @param {?} index
     * @return {?}
     */
    getComputedWidth(index) {
        return this.images[index].width / (this.images[index].height / this.MAX_HEIGHT);
    }
    /**
     * @param {?} index
     * @return {?}
     */
    isLastChild(index) {
        return index + 1 === this.images.length;
    }
    /**
     * @param {?} parentWidth
     * @return {?}
     */
    getNodeMargin(parentWidth) {
        return 'calc(' + this.GUTTER / parentWidth * 100 + '%)';
    }
    /**
     * @param {?} image
     * @param {?} i
     * @return {?}
     */
    clickOnImage(image, i) {
        this.events.emit({
            type: 'click-on-image',
            image: image,
            index: i
        });
    }
    /**
     * @param {?} elem
     * @return {?}
     */
    onImageLoaded(elem) {
        elem.style.opacity = 1;
    }
}
MasonryLayoutComponent.ɵfac = function MasonryLayoutComponent_Factory(t) { return new (t || MasonryLayoutComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };
MasonryLayoutComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MasonryLayoutComponent, selectors: [["masonry-layout"]], hostBindings: function MasonryLayoutComponent_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("resize", function MasonryLayoutComponent_resize_HostBindingHandler($event) { return ctx.onWindowResize($event); }, false, ɵngcc0.ɵɵresolveWindow);
    } }, inputs: { ENABLE_MASONRY: ["masonry", "ENABLE_MASONRY"], MAX_HEIGHT: ["max-height", "MAX_HEIGHT"], gutter: "gutter", images: "images", CLASS_NAME: ["class-name", "CLASS_NAME"] }, outputs: { events: "events" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 1, vars: 1, consts: [[3, "ngClass", "width", "height", "float", "margin", "background", "lineHeight", 4, "ngFor", "ngForOf"], [3, "ngClass"], [3, "src", "click", "load"], ["imageElem", ""]], template: function MasonryLayoutComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, MasonryLayoutComponent_div_0_Template, 3, 20, "div", 0);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngForOf", ctx.images);
    } }, directives: [ɵngcc1.NgForOf, ɵngcc1.NgClass], encapsulation: 2 });
/** @nocollapse */
MasonryLayoutComponent.ctorParameters = () => [
    { type: ElementRef }
];
MasonryLayoutComponent.propDecorators = {
    images: [{ type: Input, args: ['images',] }],
    ENABLE_MASONRY: [{ type: Input, args: ['masonry',] }],
    MAX_HEIGHT: [{ type: Input, args: ['max-height',] }],
    CLASS_NAME: [{ type: Input, args: ['class-name',] }],
    gutter: [{ type: Input, args: ['gutter',] }],
    events: [{ type: Output }],
    onWindowResize: [{ type: HostListener, args: ['window:resize', ['$event'],] }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MasonryLayoutComponent, [{
        type: Component,
        args: [{
                selector: 'masonry-layout',
                template: `<div 
	[ngClass]="CLASS_NAME"
	*ngFor="let image of images; let i = index;"
    [style.width]="image.computedWidth"
    [style.height]="image.computedHeight"
    [style.float]="'left'"
    [style.margin]="image.margin"
    [style.background]="'#eeeeee'"
    [style.lineHeight]="0">
	<img 
        #imageElem
        [src]="image.path" 
        [style.width.%]="100" 
        [style.height]="'auto'"
        [style.opacity]="0"
        (click)="clickOnImage(image, i)"
        (load)="onImageLoaded(imageElem)" />
</div>`
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }]; }, { ENABLE_MASONRY: [{
            type: Input,
            args: ['masonry']
        }], MAX_HEIGHT: [{
            type: Input,
            args: ['max-height']
        }], events: [{
            type: Output
        }], gutter: [{
            type: Input,
            args: ['gutter']
        }], 
    /**
     * @param {?} event
     * @return {?}
     */
    onWindowResize: [{
            type: HostListener,
            args: ['window:resize', ['$event']]
        }], images: [{
            type: Input,
            args: ['images']
        }], CLASS_NAME: [{
            type: Input,
            args: ['class-name']
        }] }); })();

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class MasonryLayoutModule {
}
MasonryLayoutModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: MasonryLayoutModule });
MasonryLayoutModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function MasonryLayoutModule_Factory(t) { return new (t || MasonryLayoutModule)(); }, imports: [[
            CommonModule
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(MasonryLayoutModule, { declarations: function () { return [MasonryLayoutComponent]; }, imports: function () { return [CommonModule]; }, exports: function () { return [MasonryLayoutComponent]; } }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MasonryLayoutModule, [{
        type: NgModule,
        args: [{
                declarations: [
                    MasonryLayoutComponent
                ],
                imports: [
                    CommonModule
                ],
                exports: [
                    MasonryLayoutComponent
                ],
                entryComponents: [
                    MasonryLayoutComponent
                ]
            }]
    }], null, null); })();

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

export { MasonryLayoutComponent, MasonryLayoutModule };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LW1hc29ucnktbGF5b3V0LmpzIiwic291cmNlcyI6WyJuZ3gtbWFzb25yeS1sYXlvdXQvbGliL21hc29ucnktbGF5b3V0LmNvbXBvbmVudC50cyIsIm5neC1tYXNvbnJ5LWxheW91dC9saWIvbWFzb25yeS1sYXlvdXQubW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBZ0M7QUFBUztBQUE4QjtBQUFTLElBK0Q1RSxZQUFvQixVQUFzQjtBQUM1QyxRQURzQixlQUFVLEdBQVYsVUFBVSxDQUFZO0FBQUUsc0JBM0IzQixDQUFDO0FBQ3JCLG1DQUU4QixFQUFFO0FBQ2hDLHlCQUN1QixhQUFhO0FBQ3BDLDhCQUkrQyxJQUFJO0FBQ3BELDBCQUE4QyxHQUFHO0FBQ2pELHNCQU8wQyxJQUFJLFlBQVksRUFBTztBQUNoRSxRQVFPLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUM7QUFDakQsS0FBSTtBQUVMO0FBQVM7QUFBeUI7QUFDM0I7QUFBUyxJQWxCWixJQUNJLE1BQU0sQ0FBQyxLQUFhO0FBQzFCLFFBQU0sSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLEdBQUcsQ0FBQyxDQUFDO0FBQy9CLEtBQUk7QUFFTDtBQUFTO0FBQW9CO0FBQVMsSUFFbEMsSUFBSSxRQUFRO0FBQU07QUFDSCxRQUFYLElBQUksS0FBSyxHQUFHLEtBQUssQ0FBQztBQUN6QixRQUFPLENBQUMsVUFBUyxDQUFDLElBQUUsSUFBRywwVEFBMFQsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUUseWtEQUF5a0QsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUM7QUFBRyxZQUFELEtBQUssR0FBRyxJQUFJLENBQUMsRUFBQyxFQUFFLFNBQVMsQ0FBQyxTQUFTLElBQUUsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ2ovRCxRQUFPLE9BQU8sS0FBSyxDQUFDO0FBQ3BCLEtBQUk7QUFDTDtBQUNDO0FBQVM7QUFBeUI7QUFDN0I7QUFBUyxJQUlYLGNBQWMsQ0FBQyxLQUFLO0FBQ3ZCLFFBQU8sWUFBWSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUV2QyxRQUFRLElBQUksQ0FBQyxXQUFXLEdBQUcsVUFBVSxDQUFDO0FBQ3JDLFlBQVcsSUFBSSxDQUFDLFNBQVMsR0FBRyxhQUFhLENBQUM7QUFDMUMsWUFBVyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDN0IsU0FBUyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQ2YsS0FBSTtBQUVMO0FBQVM7QUFDRztBQUFTLElBRGpCLFFBQVE7QUFDWCxRQUFPLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztBQUN4QixLQUFJO0FBRUw7QUFBUztBQUNDO0FBQVMsSUFEZixXQUFXO0FBQ2IsUUFBTSxZQUFZLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBRXhDLFFBQVEsSUFBSSxDQUFDLFlBQVksR0FBRyxVQUFVLENBQUM7QUFDdEMsWUFBVyxJQUFJLENBQUMsU0FBUyxHQUFHLGFBQWEsQ0FBQztBQUMxQyxZQUFXLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztBQUM3QixTQUFTLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDZixLQUFJO0FBRUw7QUFBUztBQUNHO0FBQVMsSUFEakIsU0FBUztBQUNYO0FBQTBCLFFBQXBCLElBQUksV0FBVyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDdEU7QUFBMEIsUUFDbkIsSUFBSSxHQUFHLEdBQVE7QUFDdEIsWUFBVyxVQUFVLEVBQUUsQ0FBQztBQUN4QixZQUFXLFFBQVEsRUFBRSxDQUFDO0FBQ3RCLFlBQVcsTUFBTSxFQUFFLENBQUM7QUFDcEIsWUFBVyxVQUFVLEVBQUUsQ0FBQztBQUN4QixTQUFRLENBQUM7QUFFVixRQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUM7QUFDL0MsWUFBVyxPQUFPO0FBQ2xCLFNBQVE7QUFFVCxRQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxXQUFXLEdBQUUsSUFBSSxDQUFDO0FBQ2pELFFBQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztBQUUxQyxRQUFRLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxFQUFFLEtBQUs7QUFDdkMsWUFBVyxJQUFJLEdBQUcsQ0FBQyxVQUFVLEtBQUssQ0FBQyxFQUFDO0FBQ3BDLGdCQUFlLEdBQUcsQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO0FBQ3RDLGdCQUFlLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0FBQzlCLGFBQVk7QUFFYixZQUFZLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUN4QixZQUFXLEdBQUcsQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQzFELFlBQ1csSUFBSSxHQUFHLENBQUMsVUFBVSxJQUFJLFdBQVcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxFQUFDO0FBQ3hFLGdCQUFlLEdBQUcsQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO0FBQ3BDO0FBQWtDLGdCQUFuQixJQUFJLE9BQU8sR0FBRyxHQUFHLENBQUMsVUFBVSxHQUFDLFdBQVcsQ0FBQztBQUV6RCxnQkFBZ0IsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQztBQUNuRCxnQkFBZSxHQUFHLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztBQUNuQyxhQUFhO0FBQ1osU0FBUSxDQUFDLENBQUM7QUFDVixLQUFJO0FBRUw7QUFBUztBQUEyQjtBQUMxQjtBQUFvQjtBQUMzQixJQUZDLGdCQUFnQixDQUFDLE9BQWUsRUFBRSxHQUFRO0FBQzVDO0FBQTBCLFFBQXBCLElBQUksYUFBYSxHQUFRLENBQUMsQ0FBQztBQUNsQztBQUEwQixRQUFuQixJQUFJLFdBQVcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUM7QUFDMUQsUUFBTyxPQUFPLEdBQUcsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUM7QUFFOUMsUUFBUSxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksRUFBRSxLQUFLO0FBQ3ZDLFlBQVcsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUM7QUFDcEMsZ0JBQWUsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztBQUM1RCxnQkFBZSxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFJLENBQUM7QUFDeEUsZ0JBQWUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQzdELGdCQUFlLE9BQU87QUFDdEIsYUFBWTtBQUViLFlBQVksSUFBSSxLQUFLLElBQUksR0FBRyxDQUFDLFVBQVUsSUFBSSxLQUFLLElBQUksR0FBRyxDQUFDLFFBQVEsRUFBQztBQUNoRTtBQUVFLGdCQUZhLElBQUksU0FBUyxDQUFDO0FBRTlCO0FBQ0MsZ0JBQWUsSUFBSSxLQUFLLEtBQUssR0FBRyxDQUFDLFFBQVEsSUFBSSxPQUFPLEdBQUcsQ0FBQyxFQUFDO0FBQzFELG9CQUFvQixTQUFTLEdBQUcsQ0FBQyxHQUFHLEdBQUcsYUFBYSxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksV0FBVyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQy9GLG9CQUFtQixJQUFJLENBQUMsYUFBYSxHQUFHLE9BQU8sR0FBQyxTQUFTLEdBQUMsSUFBSSxDQUFDO0FBRWhFLG9CQUFvQixJQUFJLElBQUksQ0FBQyxTQUFTLEtBQUssYUFBYSxFQUFDO0FBQ3hELHdCQUF1QixJQUFJLENBQUMsU0FBUyxHQUFHLGNBQWMsQ0FBQztBQUV4RCx3QkFBd0IsVUFBVSxDQUFDO0FBQ2xDLDRCQUEyQixJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDNUMseUJBQXdCLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDL0IscUJBQW9CO0FBQ3BCLGlCQUFnQjtBQUNqQixxQkFBcUI7QUFDcEIsb0JBQW1CLFNBQVMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxHQUFHLE9BQU8sSUFBSSxXQUFXLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxHQUFHLE9BQU8sQ0FBQyxHQUFHLFdBQVcsSUFBSSxXQUFXLEdBQUcsR0FBRyxDQUFDO0FBQ2hOLG9CQUFtQixJQUFJLENBQUMsYUFBYSxHQUFHLE9BQU8sR0FBQyxTQUFTLEdBQUMsSUFBSSxDQUFDO0FBQy9ELG9CQUNtQixhQUFhLElBQUksU0FBUyxDQUFDO0FBQzlDLG9CQUFtQixhQUFhLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLFdBQVcsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDO0FBQUUsaUJBQzVEO0FBRWpCO0FBQ0MsZ0JBQWUsSUFBSSxLQUFLLEtBQUssR0FBRyxDQUFDLFFBQVEsSUFBSSxHQUFHLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFDO0FBQy9FLG9CQUFnQixTQUFTLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksV0FBVyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQzFFO0FBQXNDLG9CQUFuQixJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxJQUFLLFdBQVcsSUFBSSxTQUFTLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBRS9GLG9CQUFvQixJQUFJLE1BQU0sR0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBQztBQUNsRCx3QkFBdUIsSUFBSSxDQUFDLGFBQWEsR0FBRyxPQUFPLEdBQUMsU0FBUyxHQUFDLElBQUksQ0FBQztBQUNuRSxxQkFBb0I7QUFDcEIsaUJBQWdCO0FBRWpCLGdCQUFnQixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDN0QsZ0JBQWUsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsTUFBTSxJQUFLLFdBQVcsSUFBSSxTQUFTLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLElBQUksQ0FBQztBQUMxRyxhQUFZO0FBQ1osU0FBUSxDQUFDLENBQUM7QUFDVixLQUFJO0FBRUw7QUFBUztBQUF5QjtBQUNqQjtBQUFTLElBRHRCLGdCQUFnQixDQUFDLEtBQWE7QUFDaEMsUUFBTSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUN2RixLQUFJO0FBRUw7QUFBUztBQUNQO0FBQW9CO0FBQVMsSUFEM0IsV0FBVyxDQUFDLEtBQWE7QUFDM0IsUUFBTSxPQUFPLEtBQUssR0FBRyxDQUFDLEtBQUssSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7QUFDL0MsS0FBSTtBQUVMO0FBQVM7QUFDVDtBQUFvQjtBQUFTLElBRHpCLGFBQWEsQ0FBQyxXQUFtQjtBQUNuQyxRQUFNLE9BQU8sT0FBTyxHQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsV0FBVyxHQUFHLEdBQUcsR0FBQyxJQUFJLENBQUM7QUFDM0QsS0FBSTtBQUVMO0FBQVM7QUFBeUI7QUFDcEI7QUFDUDtBQUFTLElBRlosWUFBWSxDQUFDLEtBQVUsRUFBRSxDQUFTO0FBQ3BDLFFBQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7QUFDeEIsWUFBVyxJQUFJLEVBQUUsZ0JBQWdCO0FBQ2pDLFlBQVcsS0FBSyxFQUFFLEtBQUs7QUFDdkIsWUFBVyxLQUFLLEVBQUUsQ0FBQztBQUNuQixTQUFRLENBQUMsQ0FBQztBQUNWLEtBQUk7QUFFTDtBQUFTO0FBQ0Q7QUFBb0I7QUFDdkIsSUFGRCxhQUFhLENBQUMsSUFBSTtBQUNwQixRQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQztBQUM5QixLQUFJO0FBQ0o7b0RBN0xBLFNBQVMsU0FBQyxtQkFDUCxRQUFRLEVBQUUsZ0JBQWdCLG1CQUMxQixRQUFRLEVBQUU7OzswSEFpQlAsZ0JBQ047Ozs7MkVBRUs7QUFBRTtBQUFvQjtBQUViLFlBckNLLFVBQVU7QUFBSTtBQUFJO0FBQTJDLHFCQTZDNUUsS0FBSyxTQUFDLFFBQVE7QUFBUSw2QkFDdEIsS0FBSyxTQUFDLFNBQVM7QUFBUSx5QkFDdkIsS0FBSyxTQUFDLFlBQVk7QUFBUSx5QkFDMUIsS0FBSyxTQUFDLFlBQVk7QUFBUSxxQkFFMUIsS0FBSyxTQUFDLFFBQVE7QUFDYixxQkFJRCxNQUFNO0FBQU0sNkJBWVosWUFBWSxTQUFDLGVBQWUsRUFBRSxDQUFDLFFBQVEsQ0FBQztBQUN4Qzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUFDO0FBQUM7QUFBSztBQUNPO0FBR3BCO0FDeEVEO0FBQTZCO2lEQUk1QixRQUFRLFNBQUM7RUFDTixZQUFZLEVBQUUsdUJBQ1Ysc0JBQXNCLG1CQUN6QixtQkFDRCxPQUFPLEVBQUUsdUJBQ0wsWUFBWTtFQUNmLG1CQUNEO0dBQU8sRUFBRTthQUNMLHNCQUFzQixtQkFDekIsbUJBQ0QsZUFBZSxFQUFFLHVCQUNiLHNCQUFzQixtQkFDekIsZUFDSjs7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBQ007QUFBQztBQUFDO0FBQUs7QUFDRjtBQUFtRTtBQUFJO0FBQUM7QUFBSztBQUFtQztBQUFtRTtBQUFJO0FBQUM7O0FEbkJBLEFBK0RBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUEzQkEsQUFBQSxBQUdBLEFBQUEsQUFFQSxBQUFBLEFBS0EsQUFBQSxBQUNBLEFBQUEsQUFRQSxBQUFBLEFBQUEsQUFBQSxBQVNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQWZBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUlBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFPQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBR0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBR0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQTVMQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQWlCQSxBQUNBLEFBakNBLEFBQUEsQUE2Q0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUtBLEFBQUEsQUFZQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFDbkVBLEFBSUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEVsZW1lbnRSZWYsIEhvc3RMaXN0ZW5lciwgSW5wdXQsIE91dHB1dCwgT25Jbml0LCBPbkNoYW5nZXMsIEV2ZW50RW1pdHRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEltYWdlIHtcbiAgICBwYXRoOiBzdHJpbmc7IFxuICAgIHdpZHRoOiBudW1iZXI7IFxuICAgIGhlaWdodDogbnVtYmVyO1xuICAgIGNvbXB1dGVkSGVpZ2h0Pzogc3RyaW5nO1xuICAgIGNvbXB1dGVkV2lkdGg/OiBzdHJpbmc7XG4gICAgbWFyZ2luPzogc3RyaW5nO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBJbWFnZXMgZXh0ZW5kcyBBcnJheTxJbWFnZT57fVxuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ21hc29ucnktbGF5b3V0JywgXG4gICAgdGVtcGxhdGU6IGA8ZGl2IFxuXHRbbmdDbGFzc109XCJDTEFTU19OQU1FXCJcblx0Km5nRm9yPVwibGV0IGltYWdlIG9mIGltYWdlczsgbGV0IGkgPSBpbmRleDtcIlxuICAgIFtzdHlsZS53aWR0aF09XCJpbWFnZS5jb21wdXRlZFdpZHRoXCJcbiAgICBbc3R5bGUuaGVpZ2h0XT1cImltYWdlLmNvbXB1dGVkSGVpZ2h0XCJcbiAgICBbc3R5bGUuZmxvYXRdPVwiJ2xlZnQnXCJcbiAgICBbc3R5bGUubWFyZ2luXT1cImltYWdlLm1hcmdpblwiXG4gICAgW3N0eWxlLmJhY2tncm91bmRdPVwiJyNlZWVlZWUnXCJcbiAgICBbc3R5bGUubGluZUhlaWdodF09XCIwXCI+XG5cdDxpbWcgXG4gICAgICAgICNpbWFnZUVsZW1cbiAgICAgICAgW3NyY109XCJpbWFnZS5wYXRoXCIgXG4gICAgICAgIFtzdHlsZS53aWR0aC4lXT1cIjEwMFwiIFxuICAgICAgICBbc3R5bGUuaGVpZ2h0XT1cIidhdXRvJ1wiXG4gICAgICAgIFtzdHlsZS5vcGFjaXR5XT1cIjBcIlxuICAgICAgICAoY2xpY2spPVwiY2xpY2tPbkltYWdlKGltYWdlLCBpKVwiXG4gICAgICAgIChsb2FkKT1cIm9uSW1hZ2VMb2FkZWQoaW1hZ2VFbGVtKVwiIC8+XG48L2Rpdj5gLFxufSlcblxuZXhwb3J0IGNsYXNzIE1hc29ucnlMYXlvdXRDb21wb25lbnQge1xuICAgIEdVVFRFUjogbnVtYmVyID0gMDtcbiAgICBub2RlczogYW55O1xuICAgIGVsZW06IGFueTtcbiAgICBzYXZlZE5vZGVEaW1lbnNpb25zOiBhbnkgPSBbXTtcbiAgICBvYnNlcnZlcjogYW55O1xuICAgIGdyaWRTdGF0ZTogc3RyaW5nID0gJ25vdCBzdGFydGVkJztcbiAgICByZXNpemVUaW1lcjogYW55O1xuICAgIGNoYW5nZXNUaW1lcjogYW55O1xuXG4gICAgQElucHV0KCdpbWFnZXMnKSBpbWFnZXM6IEltYWdlczsgXG4gICAgQElucHV0KCdtYXNvbnJ5JykgRU5BQkxFX01BU09OUlk6IGJvb2xlYW4gPSB0cnVlOyBcbiAgICBASW5wdXQoJ21heC1oZWlnaHQnKSBNQVhfSEVJR0hUOiBudW1iZXIgPSA0MDA7IFxuICAgIEBJbnB1dCgnY2xhc3MtbmFtZScpIENMQVNTX05BTUU6IHN0cmluZyB8IHsgW2tleTogc3RyaW5nXTogYW55OyB9O1xuXG4gICAgQElucHV0KCdndXR0ZXInKVxuICAgIHNldCBndXR0ZXIodmFsdWU6IG51bWJlcil7XG4gICAgICAgIHRoaXMuR1VUVEVSID0gdmFsdWUgLyAyO1xuICAgIH1cblxuICAgIEBPdXRwdXQoKSBldmVudHM6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gICAgIFxuICAgIGdldCBpc01vYmlsZSgpOmJvb2xlYW4ge1xuICAgICAgICB2YXIgY2hlY2sgPSBmYWxzZTtcbiAgICAgICAgKGZ1bmN0aW9uKGEpe2lmKC8oYW5kcm9pZHxiYlxcZCt8bWVlZ28pLittb2JpbGV8YXZhbnRnb3xiYWRhXFwvfGJsYWNrYmVycnl8YmxhemVyfGNvbXBhbHxlbGFpbmV8ZmVubmVjfGhpcHRvcHxpZW1vYmlsZXxpcChob25lfG9kKXxpcmlzfGtpbmRsZXxsZ2UgfG1hZW1vfG1pZHB8bW1wfG1vYmlsZS4rZmlyZWZveHxuZXRmcm9udHxvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcXC98cGx1Y2tlcnxwb2NrZXR8cHNwfHNlcmllcyg0fDYpMHxzeW1iaWFufHRyZW98dXBcXC4oYnJvd3NlcnxsaW5rKXx2b2RhZm9uZXx3YXB8d2luZG93cyBjZXx4ZGF8eGlpbm8vaS50ZXN0KGEpfHwvMTIwN3w2MzEwfDY1OTB8M2dzb3w0dGhwfDUwWzEtNl1pfDc3MHN8ODAyc3xhIHdhfGFiYWN8YWMoZXJ8b298c1xcLSl8YWkoa298cm4pfGFsKGF2fGNhfGNvKXxhbW9pfGFuKGV4fG55fHl3KXxhcHR1fGFyKGNofGdvKXxhcyh0ZXx1cyl8YXR0d3xhdShkaXxcXC1tfHIgfHMgKXxhdmFufGJlKGNrfGxsfG5xKXxiaShsYnxyZCl8YmwoYWN8YXopfGJyKGV8dil3fGJ1bWJ8YndcXC0obnx1KXxjNTVcXC98Y2FwaXxjY3dhfGNkbVxcLXxjZWxsfGNodG18Y2xkY3xjbWRcXC18Y28obXB8bmQpfGNyYXd8ZGEoaXR8bGx8bmcpfGRidGV8ZGNcXC1zfGRldml8ZGljYXxkbW9ifGRvKGN8cClvfGRzKDEyfFxcLWQpfGVsKDQ5fGFpKXxlbShsMnx1bCl8ZXIoaWN8azApfGVzbDh8ZXooWzQtN10wfG9zfHdhfHplKXxmZXRjfGZseShcXC18Xyl8ZzEgdXxnNTYwfGdlbmV8Z2ZcXC01fGdcXC1tb3xnbyhcXC53fG9kKXxncihhZHx1bil8aGFpZXxoY2l0fGhkXFwtKG18cHx0KXxoZWlcXC18aGkocHR8dGEpfGhwKCBpfGlwKXxoc1xcLWN8aHQoYyhcXC18IHxffGF8Z3xwfHN8dCl8dHApfGh1KGF3fHRjKXxpXFwtKDIwfGdvfG1hKXxpMjMwfGlhYyggfFxcLXxcXC8pfGlicm98aWRlYXxpZzAxfGlrb218aW0xa3xpbm5vfGlwYXF8aXJpc3xqYSh0fHYpYXxqYnJvfGplbXV8amlnc3xrZGRpfGtlaml8a2d0KCB8XFwvKXxrbG9ufGtwdCB8a3djXFwtfGt5byhjfGspfGxlKG5vfHhpKXxsZyggZ3xcXC8oa3xsfHUpfDUwfDU0fFxcLVthLXddKXxsaWJ3fGx5bnh8bTFcXC13fG0zZ2F8bTUwXFwvfG1hKHRlfHVpfHhvKXxtYygwMXwyMXxjYSl8bVxcLWNyfG1lKHJjfHJpKXxtaShvOHxvYXx0cyl8bW1lZnxtbygwMXwwMnxiaXxkZXxkb3x0KFxcLXwgfG98dil8enopfG10KDUwfHAxfHYgKXxtd2JwfG15d2F8bjEwWzAtMl18bjIwWzItM118bjMwKDB8Mil8bjUwKDB8Mnw1KXxuNygwKDB8MSl8MTApfG5lKChjfG0pXFwtfG9ufHRmfHdmfHdnfHd0KXxub2soNnxpKXxuenBofG8yaW18b3AodGl8d3YpfG9yYW58b3dnMXxwODAwfHBhbihhfGR8dCl8cGR4Z3xwZygxM3xcXC0oWzEtOF18YykpfHBoaWx8cGlyZXxwbChheXx1Yyl8cG5cXC0yfHBvKGNrfHJ0fHNlKXxwcm94fHBzaW98cHRcXC1nfHFhXFwtYXxxYygwN3wxMnwyMXwzMnw2MHxcXC1bMi03XXxpXFwtKXxxdGVrfHIzODB8cjYwMHxyYWtzfHJpbTl8cm8odmV8em8pfHM1NVxcL3xzYShnZXxtYXxtbXxtc3xueXx2YSl8c2MoMDF8aFxcLXxvb3xwXFwtKXxzZGtcXC98c2UoYyhcXC18MHwxKXw0N3xtY3xuZHxyaSl8c2doXFwtfHNoYXJ8c2llKFxcLXxtKXxza1xcLTB8c2woNDV8aWQpfHNtKGFsfGFyfGIzfGl0fHQ1KXxzbyhmdHxueSl8c3AoMDF8aFxcLXx2XFwtfHYgKXxzeSgwMXxtYil8dDIoMTh8NTApfHQ2KDAwfDEwfDE4KXx0YShndHxsayl8dGNsXFwtfHRkZ1xcLXx0ZWwoaXxtKXx0aW1cXC18dFxcLW1vfHRvKHBsfHNoKXx0cyg3MHxtXFwtfG0zfG01KXx0eFxcLTl8dXAoXFwuYnxnMXxzaSl8dXRzdHx2NDAwfHY3NTB8dmVyaXx2aShyZ3x0ZSl8dmsoNDB8NVswLTNdfFxcLXYpfHZtNDB8dm9kYXx2dWxjfHZ4KDUyfDUzfDYwfDYxfDcwfDgwfDgxfDgzfDg1fDk4KXx3M2MoXFwtfCApfHdlYmN8d2hpdHx3aShnIHxuY3xudyl8d21sYnx3b251fHg3MDB8eWFzXFwtfHlvdXJ8emV0b3x6dGVcXC0vaS50ZXN0KGEuc3Vic3RyKDAsNCkpKSBjaGVjayA9IHRydWU7fSkobmF2aWdhdG9yLnVzZXJBZ2VudHx8bmF2aWdhdG9yLnZlbmRvcik7XG4gICAgICAgIHJldHVybiBjaGVjaztcbiAgICB9O1xuICAgICBcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYpe1xuICAgICAgICB0aGlzLmVsZW0gPSB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudDtcbiAgICB9XG5cbiAgICBASG9zdExpc3RlbmVyKCd3aW5kb3c6cmVzaXplJywgWyckZXZlbnQnXSlcbiAgICBvbldpbmRvd1Jlc2l6ZShldmVudCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5yZXNpemVUaW1lcik7XG5cbiAgICAgICAgdGhpcy5yZXNpemVUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5ncmlkU3RhdGUgPSAnbm90IHN0YXJ0ZWQnO1xuICAgICAgICAgICAgdGhpcy5idWlsZEdyaWQoKTsgXG4gICAgICAgIH0sIDI1MCk7XG4gICAgfVxuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuYnVpbGRHcmlkKCk7XG4gICAgfVxuXG4gICAgbmdPbkNoYW5nZXMoKXtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY2hhbmdlc1RpbWVyKTtcblxuICAgICAgICB0aGlzLmNoYW5nZXNUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5ncmlkU3RhdGUgPSAnbm90IHN0YXJ0ZWQnO1xuICAgICAgICAgICAgdGhpcy5idWlsZEdyaWQoKTsgXG4gICAgICAgIH0sIDI1MCk7XG4gICAgfVxuXG4gICAgYnVpbGRHcmlkKCl7XG4gICAgICAgIGxldCBwYXJlbnRXaWR0aCA9IE1hdGguZmxvb3IodGhpcy5lbGVtLnBhcmVudE5vZGUub2Zmc2V0V2lkdGgpO1xuICAgICAgICBsZXQgdG90YWxSb3dXaWR0aDogYW55ID0gMDsgXG4gICAgICAgIGxldCByb3c6IGFueSA9IHtcbiAgICAgICAgICAgIHN0YXJ0SW5kZXg6IDAsXG4gICAgICAgICAgICBlbmRJbmRleDogMCxcbiAgICAgICAgICAgIGxlbmd0aDogMCxcbiAgICAgICAgICAgIHRvdGFsV2lkdGg6IDBcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoIXRoaXMuaW1hZ2VzIHx8ICF0aGlzLmltYWdlcy5sZW5ndGgpe1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbGVtLnN0eWxlLndpZHRoID0gcGFyZW50V2lkdGggKydweCc7XG4gICAgICAgIHRoaXMuZWxlbS5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlJztcblxuICAgICAgICB0aGlzLmltYWdlcy5mb3JFYWNoKChub2RlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYgKHJvdy50b3RhbFdpZHRoID09PSAwKXtcbiAgICAgICAgICAgICAgICByb3cuc3RhcnRJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgICAgIHJvdy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByb3cubGVuZ3RoKys7XG4gICAgICAgICAgICByb3cudG90YWxXaWR0aCArPSB0aGlzLmdldENvbXB1dGVkV2lkdGgoaW5kZXgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocm93LnRvdGFsV2lkdGggPj0gcGFyZW50V2lkdGggfHwgdGhpcy5pc0xhc3RDaGlsZChpbmRleCkpe1xuICAgICAgICAgICAgICAgIHJvdy5lbmRJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgICAgIGxldCBzY2FsaW5nID0gcm93LnRvdGFsV2lkdGgvcGFyZW50V2lkdGg7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNldENvbERpbWVuc2lvbnMoc2NhbGluZywgcm93KTtcbiAgICAgICAgICAgICAgICByb3cudG90YWxXaWR0aCA9IDA7IFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzZXRDb2xEaW1lbnNpb25zKHNjYWxpbmc6IG51bWJlciwgcm93OiBhbnkpe1xuICAgICAgICBsZXQgdG90YWxSb3dXaWR0aDogYW55ID0gMDtcbiAgICAgICAgbGV0IHBhcmVudFdpZHRoID0gdGhpcy5lbGVtLnBhcmVudE5vZGUub2Zmc2V0V2lkdGg7XG4gICAgICAgIHNjYWxpbmcgPSAoc2NhbGluZyA8IDEpID8gMSA6IHNjYWxpbmc7XG5cbiAgICAgICAgdGhpcy5pbWFnZXMuZm9yRWFjaCgobm9kZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5FTkFCTEVfTUFTT05SWSl7XG4gICAgICAgICAgICAgICAgbm9kZS5jb21wdXRlZEhlaWdodCA9IHRoaXMuTUFYX0hFSUdIVCArICdweCc7XG4gICAgICAgICAgICAgICAgbm9kZS5jb21wdXRlZFdpZHRoID0gdGhpcy5nZXRDb21wdXRlZFdpZHRoKGluZGV4KSArICdweCc7XG4gICAgICAgICAgICAgICAgbm9kZS5tYXJnaW4gPSB0aGlzLmdldE5vZGVNYXJnaW4ocGFyZW50V2lkdGgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGluZGV4ID49IHJvdy5zdGFydEluZGV4ICYmIGluZGV4IDw9IHJvdy5lbmRJbmRleCl7XG4gICAgICAgICAgICAgICAgbGV0IG5vZGVXaWR0aDtcblxuICAgICAgICAgICAgICAgIC8vIGxhc3QgaW1hZ2VcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IHJvdy5lbmRJbmRleCAmJiBzY2FsaW5nID4gMSl7IFxuICAgICAgICAgICAgICAgICAgICBub2RlV2lkdGggPSAoMTAwIC0gdG90YWxSb3dXaWR0aCkgLSAoKHRoaXMuR1VUVEVSICogMikgLyBwYXJlbnRXaWR0aCAqIDEwMCk7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuY29tcHV0ZWRXaWR0aCA9ICdjYWxjKCcrbm9kZVdpZHRoKyclKSc7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZ3JpZFN0YXRlID09PSAnbm90IHN0YXJ0ZWQnKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JpZFN0YXRlID0gJ3ByZS1idWlsZGluZyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRHcmlkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZVdpZHRoID0gKCh0aGlzLmdldENvbXB1dGVkV2lkdGgoaW5kZXgpIC8gc2NhbGluZykgLyBwYXJlbnRXaWR0aCAqIDEwMCkgLSAoKHJvdy5sZW5ndGggKiAodGhpcy5HVVRURVIgKiAyKSkgKiAodGhpcy5nZXRDb21wdXRlZFdpZHRoKGluZGV4KSAvIHNjYWxpbmcpIC8gcGFyZW50V2lkdGgpIC8gcGFyZW50V2lkdGggKiAxMDA7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuY29tcHV0ZWRXaWR0aCA9ICdjYWxjKCcrbm9kZVdpZHRoKyclKSc7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0b3RhbFJvd1dpZHRoICs9IG5vZGVXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgdG90YWxSb3dXaWR0aCArPSAodGhpcy5HVVRURVIgLyBwYXJlbnRXaWR0aCAqIDEwMCkgKiAyOyAgXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gbGFzdCByb3cgYW5kIGxhc3QgaW1hZ2VcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IHJvdy5lbmRJbmRleCAmJiByb3cubGVuZ3RoID09PSAxICYmIHRoaXMuaXNNb2JpbGUpe1xuICAgICAgICAgICAgICAgIFx0bm9kZVdpZHRoID0gMTAwIC0gKCh0aGlzLkdVVFRFUiAqIDIpIC8gcGFyZW50V2lkdGggKiAxMDApO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaGVpZ2h0ID0gbm9kZS5oZWlnaHQgKiAoIHBhcmVudFdpZHRoICogKG5vZGVXaWR0aCAvIDEwMCkgLyBub2RlLndpZHRoKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaGVpZ2h0LzIgPCB0aGlzLk1BWF9IRUlHSFQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5jb21wdXRlZFdpZHRoID0gJ2NhbGMoJytub2RlV2lkdGgrJyUpJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG5vZGUubWFyZ2luID0gdGhpcy5nZXROb2RlTWFyZ2luKHBhcmVudFdpZHRoKTtcbiAgICAgICAgICAgICAgICBub2RlLmNvbXB1dGVkSGVpZ2h0ID0gbm9kZS5oZWlnaHQgKiAoIHBhcmVudFdpZHRoICogKG5vZGVXaWR0aCAvIDEwMCkgLyBub2RlLndpZHRoKSArICdweCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldENvbXB1dGVkV2lkdGgoaW5kZXg6IG51bWJlcil7XG4gICAgICAgIHJldHVybiB0aGlzLmltYWdlc1tpbmRleF0ud2lkdGggLyAodGhpcy5pbWFnZXNbaW5kZXhdLmhlaWdodCAvIHRoaXMuTUFYX0hFSUdIVCk7XG4gICAgfVxuXG4gICAgaXNMYXN0Q2hpbGQoaW5kZXg6IG51bWJlcil7XG4gICAgICAgIHJldHVybiBpbmRleCArIDEgPT09IHRoaXMuaW1hZ2VzLmxlbmd0aDtcbiAgICB9XG5cbiAgICBnZXROb2RlTWFyZ2luKHBhcmVudFdpZHRoOiBudW1iZXIpe1xuICAgICAgICByZXR1cm4gJ2NhbGMoJyt0aGlzLkdVVFRFUiAvIHBhcmVudFdpZHRoICogMTAwKyclKSc7XG4gICAgfVxuXG4gICAgY2xpY2tPbkltYWdlKGltYWdlOiBhbnksIGk6IG51bWJlcil7XG4gICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoe1xuICAgICAgICAgICAgdHlwZTogJ2NsaWNrLW9uLWltYWdlJyxcbiAgICAgICAgICAgIGltYWdlOiBpbWFnZSxcbiAgICAgICAgICAgIGluZGV4OiBpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uSW1hZ2VMb2FkZWQoZWxlbSl7XG4gICAgICAgIGVsZW0uc3R5bGUub3BhY2l0eSA9IDE7XG4gICAgfVxufSIsImltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgTWFzb25yeUxheW91dENvbXBvbmVudCB9IGZyb20gJy4vbWFzb25yeS1sYXlvdXQuY29tcG9uZW50JzsgXG5cbkBOZ01vZHVsZSh7XG4gICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgIE1hc29ucnlMYXlvdXRDb21wb25lbnRcbiAgICBdLFxuICAgIGltcG9ydHM6IFtcbiAgICAgICAgQ29tbW9uTW9kdWxlXG4gICAgXSxcbiAgICBleHBvcnRzOiBbXG4gICAgICAgIE1hc29ucnlMYXlvdXRDb21wb25lbnRcbiAgICBdLFxuICAgIGVudHJ5Q29tcG9uZW50czogW1xuICAgICAgICBNYXNvbnJ5TGF5b3V0Q29tcG9uZW50XG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBNYXNvbnJ5TGF5b3V0TW9kdWxlIHsgfVxuIl19